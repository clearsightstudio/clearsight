#!/usr/bin/env ruby

require 'optparse'
require 'methadone'
require 'clearsight.rb'

class App
  include Methadone::Main
  include Methadone::CLILogging
  include Methadone::SH

  main do |command, *args|
    case command.to_s.to_sym
    when :deploy
      puts "Deploying to #{args.first}..."
    when :"" # No command
      show_help
    when :help
      show_help
    else
      puts "Invalid command."
      show_help
    end
  end

  def self.show_help
    puts "USAGE:"
    puts "  deploy <setup>"
    puts "    Deploys or sets up deployment to a remote server. Replaces gitdeploysetup."
  end

  arg :args, :optional
  
  version Clearsight::VERSION

  use_log_level_option

  go!
end
